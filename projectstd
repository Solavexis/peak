local SCRIPT_URL = "https://raw.githubusercontent.com/Solavexis/peak/refs/heads/main/projectstd"

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character
local humanoid = character.Humanoid
local playerGui = player:WaitForChild("PlayerGui")

local function teleportTo(targetPlaceId)
    local tpGui = playerGui:FindFirstChild("Teleporting")
    if tpGui and tpGui:IsA("ScreenGui") then
        tpGui.Enabled = true
    end
    TeleportService:Teleport(targetPlaceId)
end

local function collectAllRings()
    local char = player.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local collectibles = Workspace:FindFirstChild("Collectibles")
    if not collectibles then return end

    for _, model in ipairs(collectibles:GetChildren()) do
        if model:IsA("Model") then
            local ring = model:FindFirstChild("Ring")
            if ring then
                local touchInterest = ring:FindFirstChild("TouchInterest")
                if touchInterest then
                    pcall(function()
                        firetouchinterest(ring, hrp, 0)
                        task.wait(0.01)
                        firetouchinterest(ring, hrp, 1)
                    end)
                end
            end
        end
    end
end

local function collectAllOrbs()
    local char = player.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local collectibles = Workspace:FindFirstChild("Collectibles")
    if not collectibles then return end

    for _, model in ipairs(collectibles:GetChildren()) do
        if model:IsA("BasePart") then
            local ring = model:FindFirstChild("TouchInterest")
            if ring then
                firetouchinterest(ring, hrp, 0)
                task.wait(0.01)
                firetouchinterest(ring, hrp, 1)
            end
        end
    end
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomFarmGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 210, 0, 320)
mainFrame.Position = UDim2.new(1, -230, 0.5, -160)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Custom Menu | Place: " .. game.PlaceId
title.TextColor3 = Color3.new(1, 1, 1)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0, 8)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Parent = mainFrame

local UIS = game:GetService("UserInputService")
local frame = mainFrame

local dragToggle, dragStart, startPos

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragToggle = true
        dragStart = input.Position
        startPos = frame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragToggle = false
            end
        end)
    end
end)

UIS.InputChanged:Connect(function(input)
    if dragToggle and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

local function createButton(text, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 45)
    btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    btn.Text = text
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamSemibold
    btn.Parent = mainFrame

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = btn

    btn.MouseButton1Click:Connect(callback)
    return btn
end

pcall(function()
    if queue_on_teleport then
        queue_on_teleport('loadstring(game:HttpGet("' .. SCRIPT_URL .. '"))()')
    elseif syn and syn.queue_on_teleport then
        syn.queue_on_teleport('loadstring(game:HttpGet("' .. SCRIPT_URL .. '"))()')
    end
end)

if game.PlaceId == 95932206229482 then
    return
end

if game.PlaceId == 86496104885280 then
    createButton("Teleport to Lobby Test", function()
        teleportTo(95932206229482)
    end)
end

if game.PlaceId == 119361335046198 then
    createButton("Collect Speed Orbs", function()
        collectAllOrbs()
    end)

    createButton("Collect Rings", function()
        collectAllRings()
    end)

    createButton("TP Back to Lobby Test", function()
        teleportTo(95932206229482)
    end)
end
